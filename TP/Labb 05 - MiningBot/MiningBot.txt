void main
START
	RunMasterMiningFunction()
END

RunMasterMiningFunction()
START
	WHILE(doMining)
	START
		gatheringTypeTarget = GetMineralTypeToMine()

		FindTargetMineral(gatheringTypeTarget)

		IF (targetFound == TRUE)
		START
			PerformMining(gatheringTypeTarget)
		END

		ELSE
		START
			TargetMineralNotFound()
		END

		IF (gatheringContainerIsEmpty != TRUE)
		START
			ProcessGatheredMinerals()
		END

	END
END


FindTargetMinderal(targetType)
START
	WHILE(targetFound == FALSE && madeFullCirkelTurn == FALSE)
	START
		Turn();
		ScanFor(targetType);
	END
END

PerformMining(mineralTypeToGather)
START
	WHILE(gatheringContainerIsFull == FALSE && foundTargetMineral != FALSE)
	START
		MoveTo(targetLocationX, TargetLocationY)
		GatherMineral(mineralTypeToGather)
		FindTargetMineral(mineralTypeToGather)
	END
START

ProcessGatheredMinerals()
START
	WHILE(gatheringContainerIsEmpty == FALSE)
	START
		FOR_EACH Compartment ContainerCompartments[]
		START
			INT processType = CheckMineralTypeProccessing(ContainerCompartments[Compartment])
			CASE (processlType)
			CASE 0:
				MeltMineral(ContainerCompartments[Compartment])
			CASE 1:
				SellMineral(ContainerCompartments[Compartment])
			CASE 2:
				PileMineral(ContainerCompartments[Compartment])
			DEFAULT:
				PileUnkownActionType(ContainerCompartments[Compartment])
		END
	END
END